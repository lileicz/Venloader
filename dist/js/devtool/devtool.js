amkit.add(["jquery"],function(){var devtool={};(function(ns){ns.util=(function(){var format=/(\d{4})-(\d{2})-(\d{2}) (\d{2})\:(\d{2})\:(\d{2})/;var radix=10;var int_format=/^(0|[1-9]\d*)$/;var number_format=/^(0|[1-9]\d*)$|^(0|[1-9]\d*)\.(\d+)$/;var number_format_2b=/^(0|[1-9]\d*)$|^(0|[1-9]\d*)\.(\d{1,2})$/;var httpUrl=/^(http:\/\/).*/;var toString=Object.prototype.toString;return{getWindowURLExcludeHash:function(){var ap=location.href.indexOf("#");return ap==-1?location.href:location.href.substring(0,ap)},getUrlParma:function(name){var args={};var query=location.search.substring(1);var pairs=query.split("&");for(var i=0;i<pairs.length;i++){var pos=pairs[i].indexOf("=");if(pos==-1){continue}var argname=pairs[i].substring(0,pos);var value=pairs[i].substring(pos+1);value=decodeURIComponent(value);args[argname]=value}if(!name){return args}else{return args[name]||""}},getURLExcludeHash:function(){var ap=location.href.indexOf("#");return ap==-1?location.href:location.href.substring(0,ap)},getHashValue:function(name,hash){var rt={};return rt},copy:function(content,obj){var flag=false;try{flag=window.clipboardData.setData("Text",content)}catch(e){}try{if(flag){alert(obj.success)}else{alert(obj.failure)}}catch(e){}},getSelectedText:function(){if(window.getSelection){return window.getSelection().toString()}else{if(document.getSelection){return document.getSelection()}else{if(document.selection){return document.selection.createRange().text}}}},getTextFieldSelection:function(e){if(e.selectionStart!=undefined&&e.selectionEnd!=undefined){var start=e.selectionStart;var end=e.selectionEnd;return e.value.substring(start,end)}else{return""}},parseDate:function(dateString){var rt="";var t=dateString.match(format);if(t!=null){var year=parseInt(t[1],radix);var month=parseInt(t[2],radix)-1;var day=parseInt(t[3],radix);var hours=parseInt(t[4],radix);var minutes=parseInt(t[5],radix);var seconds=parseInt(t[6],radix);rt=new Date(year,month,day,hours,minutes,seconds,0)}return rt},formatDate:function(date,format){if(date){if(!format){format="yyyy-MM-dd hh:mm:ss"}var o={MM:date.getMonth()+1,dd:date.getDate(),hh:date.getHours(),mm:date.getMinutes(),ss:date.getSeconds(),S:date.getMilliseconds()};if(/(yyyy)/.test(format)){format=format.replace(RegExp.$1,date.getFullYear())}for(var k in o){if(new RegExp("("+k+")").test(format)){format=format.replace(RegExp.$1,RegExp.$1.length==1?o[k]:("00"+o[k]).substr((""+o[k]).length))}}}else{return""}return format},formatBeforeDate:function(currentDate,date){var util=ns.util,dist=currentDate-(date-0),aSec=1000,aMin=aSec*60,aHour=aMin*60,aDay=aHour*24,aWeek=aDay*7,rt="";if(dist<=aSec){rt="1秒前"}else{if(dist<aMin){rt=Math.floor(dist/aSec)+"秒前"}else{if(dist<aHour){rt=Math.floor(dist/aMin)+"分钟前"}else{if(dist<aDay){rt=Math.floor(dist/aHour)+"小时前"}else{if(dist<2*aDay){rt="昨天"}else{if(dist<aWeek){rt=Math.floor(dist/aDay)+"天前"}else{rt=util.formatDate(new Date(date),"yyyy-MM-dd")}}}}}}return rt},format2Url:function(str){if(ns.util.isUrl(str)){if(str.charCodeAt(0)==115){return"http://"+str}else{return str}}else{return str}},strlen:function(str){if(!str){return 0}var len=0;for(var i=0;i<str.length;i++){if(str.charCodeAt(i)>255){len+=2}else{len++}}return len},isNull:function(v){var rt=true;if(v){v=jQuery.trim(v);if(v.length>0){rt=false}}return rt},isNaN:function(v){var rt=true;if(this.isNull(v)==false){if(number_format.test(v)){rt=false}}return rt},isNaN2b:function(v){var rt=true;if(this.isNull(v)==false){if(number_format_2b.test(v)){rt=false}}return rt},isNaI:function(v){var rt=true;if(this.isNaN(v)==false){if(int_format.test(v)){rt=false}}return rt},httpUrl:function(url){if(!httpUrl.test(url)){url="http://"+url}return url},substr:function(str,len){var str_length=0;var str_len=0;str_cut="";str_len=str.length;for(var i=0;i<str_len;i++){a=str.charAt(i);str_length++;if(escape(a).length>4){str_length++}str_cut=str_cut.concat(a);if(str_length>=len){str_cut=str_cut.concat("...");return str_cut}}if(str_length<len){return str}},serialize:function(obj){if(undefined==obj){return'"undefined"'}switch(obj.constructor){case Object:var str="{";for(var o in obj){str+='"'+o+'":'+this.serialize(obj[o])+","}if(str.substr(str.length-1)==","){str=str.substr(0,str.length-1)}return str+"}";break;case Array:var str="[";for(var o in obj){str+=this.serialize(obj[o])+","}if(str.substr(str.length-1)==","){str=str.substr(0,str.length-1)}return str+"]";break;case Boolean:return'"'+obj.toString()+'"';break;case Date:return'"'+obj.toString()+'"';break;case Function:return'"'+obj.toString()+'"';break;case Number:return'"'+obj.toString()+'"';break;case String:return'"'+obj.toString()+'"';break;default:return'"构造函数为:'+obj.constructor.toString()+'"'}},equalLength:function(v,len){return this.strlen(v)<=len},isNumber:function(val){return typeof(val)==="number"},isString:function(val){return toString.call(val)==="[object String]"},isFunction:function(val){return toString.call(val)==="[object Function]"},isRegExp:function(val){return toString.call(val)==="[object RegExp]"},isObject:function(val){return val===Object(val)},isArray:Array.isArray||function(val){return toString.call(val)==="[object Array]"},isUrl:function(url){var htmlReg=/(http(s)?:\/\/)?([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/;return htmlReg.test(url)},makeArray:function(o){if(o==null){return[]}if(ns.util.isArray(o)){return o}if(typeof o.length!=="number"||o.alert||ns.util.isString(o)||ns.util.isFunction(o)){return[o]}var ret=[];for(var i=0,l=o.length;i<l;i++){ret[i]=o[i]}return ret}}})()})(devtool);(function(ns,$){function DeveloperToolbar(){this.init()}var _fpr=DeveloperToolbar.prototype;_fpr.init=function(){var t=this;t._data={};t.createFrame();t.eventBind()};_fpr.eventBind=function(){var t=this,ctn=t._data.root;$(document).keyup(function(e){if(e.ctrlKey&&e.keyCode==97){if(t.ifShow){t.hide()}else{t.show()}}return false});$("._div-close").click(function(){t.hide()});t._data.editCtn.keyup(function(e){if(e.keyCode==13){var v=t._data.editCtn.find("input").val();if(!v){return}t.compile(v);t._data.editCtn.find("input").val("")}})};_fpr.createFrame=function(){var t=this,rootId="dev_toolbar_"+(new Date()-0),rootTemp=t.template.mainFrame.join(""),logTemp=t.template.logFrame.join(""),editTemp=t.template.editer.join(""),rootCss=t.template.mainFrameCss,logCss=t.template.logFrameCss,editCss=t.template.editerCss;t._data.rootId=rootId;t._data.root=$(rootTemp);t._data.root.css(rootCss).attr(rootId);t._data.logCtn=$(logTemp).css(logCss);t._data.editCtn=$(editTemp);t._data.editCtn.find("input").css(editCss);t._data.root.find("._developer-toolbar-ctn").append(t._data.logCtn).append(t._data.editCtn);$("body").append(t._data.root)};_fpr.log=function(content,type){var t=this,style=type=="error"?"color:red":"",content=(ns.util.serialize(content)+"").replace(/^\"/,"").replace(/\"$/,""),p=$('<p style="'+style+'"></p>').text(content);t._data.logCtn.append(p);t._data.logCtn.scrollTop(10000);t.show()};_fpr.compile=function(str){var t=this;log("--------------------------------------------------------------------------");log("输入 ："+str);try{var retS=window.eval.call(window,str);t.log(retS)}catch(e){t.log(e.toString(),"error")}};_fpr.execution=function(str){};_fpr.show=function(){this.ifShow=true;this._data.root.slideDown();this._data.editCtn.find("input").focus()};_fpr.hide=function(){this.ifShow=false;this._data.root.hide()};_fpr.template={mainFrame:['<div style="position:fixed;_position:absolute;bottom:0;left:0;color:#000">','	<div class="_developer-toolbar-ctn" style="padding:5px;margin:5px;background:#fff;"><a class="_div-close" href="javascript:void(0)" style="color:black;float:right;text-decoration:none;">关闭</a>控制台<span style="font-size:12px">(按ctrl+1可开关控制台)</span>：</div>',"</div>"],mainFrameCss:{background:"#ccc",margin:0,padding:0,"z-index":9999,width:"100%",overflow:"hidden",bottom:"0px",display:"none","font-size":"14px","line-height":"1.5"},logFrame:['<div class="_log-ctn"></div>'],logFrameCss:{height:200,"overflow-y":"auto"},editFrame:['<div class="_edit-ctn"></div>'],editFrameCss:{border:"1px solid #999"},editer:['<div style="border:1px solid #555;"><input type="text" class="_editer"></input></div>'],editerCss:{width:"100%",border:"none",height:"30px","line-height":"30px",overflow:"hidden"}};(function(){var dt=new DeveloperToolbar();window.log=function(content,type){dt.log(content,type)}})()})(devtool,jQuery);return devtool});